@page
@model IndexModel

<div class="banner">
    <div class="banner_tabs">
        <div id="planner" class="banner_tabs-selected">
            <span>Reisplanner</span>
        </div>
        <div id="schedule">
            <span>Schoolrooster</span>
        </div>
    </div>
    <div class="banner_content">
        <div class="banner_planner">
            <h1>Plan je reis</h1>
            <form class="planner" method="get">
                <input type="hidden" name="handler" value="Trips" />
                <div class="planner_search">
                    <div class="stations_search">
                        <label>van</label>
                        <input type="text" id="fromStation" name="fromStation" autocomplete="off" placeholder="station of stad" required/>
                        <div class="stations_results"></div>
                    </div>

                    <div class="planner_switch"></div>

                    <div class="stations_search">
                        <label>naar</label>
                        <input type="text" id="toStation" name="toStation" autocomplete="off" placeholder="station of stad" required/>
                        <div class="stations_results"></div>
                    </div>
                </div>
                <div class="planner_buttons">
                    <div class="planner_date">
                        <input name="date" type="date" required/>
                    </div>

                    <div class="planner_time">
                        <input name="time" type="time" required/>
                    </div>

                    <input type="submit" value="Submit"/>
                </div>
            </form>
        </div>
        
        <div class="banner_schedule"></div>
    </div>
</div>

<div class="trips">
    <div class="trips_content">
        @if (Model.Trips != null)
        {
            <div class="trips_results">
                @foreach (var trip in Model.Trips)
                {
                    <div class="trips_result">
                        <div class="trips_row">
                            <div class="trips_times">
                                <span class="trips_timespan">@trip.Legs[0].Origin.PlannedDateTime.ToString("HH:mm")</span>
                                <span>></span>
                                <span class="trips_timespan">@trip.Legs[^1].Destination.PlannedDateTime.ToString("HH:mm")</span>
                            </div>
                            <div class="trip_info">
                                <span>@TimeSpan.FromMinutes(trip.PlannedDurationInMinutes).ToString(@"hh\:mm")</span>
                                <span>@trip.Transfers</span>
                            </div>
                        </div>
                    </div>
                }
            </div>
            <div class="trips_details">
                <div class="trips_title">
                    Reisadvies
                </div>
                <div class="trips_legs">
                    @foreach (var leg in Model.Trips[0].Legs)
                    {
                        @if (leg.TransferMessages != null)
                        {
                            <div class="trips_transfer">
                                <div class="trips_transfer_icon">

                                </div>
                                <div class="trips_transfer_graphic">
                                    <div></div>
                                </div>
                                <div class="trips_transfer_info">
                                    <div>@leg.TransferMessages[0].Message</div>
                                </div>
                            </div>
                        }

                        <div class="trips_leg">
                            <div class="trips_times">
                                <span>@leg.Origin.PlannedDateTime.ToString("HH:mm")</span>
                                <span>@leg.Destination.PlannedDateTime.ToString("HH:mm")</span>
                            </div>
                            <div class="trips_graphic">
                                <div class="trips_pin"></div>
                                <div class="trips_line"></div>
                                <div class="trips_pin"></div>
                            </div>
                            <div class="trips_info">
                                <div class="trips_station">
                                    <span>@leg.Origin.Name</span>
                                    <span class="trips_track">Spoor @leg.Origin.PlannedTrack</span>
                                </div>
                                <div class="trips_notes">
                                    @foreach (var note in leg.Product.Notes)
                                    {
                                        <span>@note[0].Value</span>
                                    }
                                </div>
                                <div class="trips_station">
                                    <span>@leg.Destination.Name</span>
                                    <span class="trips_track">Spoor @leg.Destination.PlannedTrack</span>
                                </div>
                            </div>
                        </div>
                    }

                </div>
            </div>
        }
    </div>
</div>